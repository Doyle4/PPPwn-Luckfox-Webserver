<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PPPwn-Luckfox GoldHEN Host - 11.00</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: black;
        }
        .container {
            max-width: 1000px;
            padding: 40px;
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        h1 {
            font-size: 32px;
            color: #333;
        }
        .button {
            display: inline-block;
            margin: 5px;
            width: 200px;
            padding: 10px 15px;
            font-size: 18px;
            color: #fff;
            background: linear-gradient(135deg, #007bff, #0056b3);
            border: none;
            border-radius: 8px;
            text-decoration: none;
            transition: background 0.3s, transform 0.2s;
            cursor: pointer;
        }
        .button:hover {
            background: linear-gradient(135deg, #0056b3, #004099);
            transform: translateY(-2px);
        }
        .button:active {
            transform: translateY(1px);
        }
    </style>
    <script>
        const payloadFiles = {
            app2usb: 'app2usb.bin.bz2',
            appDumper: 'appdumper.bin.bz2',
            backup: 'backup.bin.bz2',
            disableASLR: 'disableaslr.bin.bz2',
            disableUpdates: 'disableupdates.bin.bz2',
            enableBrowser: 'enablebrowser.bin.bz2',
            enableUpdates: 'enableupdates.bin.bz2',
            exitIDU: 'exitidu.bin.bz2',
            ftp: 'ftp.bin.bz2',
            historyBlocker: 'historyblocker.bin.bz2',
            kernelDumper: 'kerneldumper.bin.bz2',
            moduleDumper: 'moduledumper.bin.bz2',
            permanentUART: 'permanentuart.bin.bz2',
            ps4debug: 'ps4debug.bin.bz2',
            restore: 'restore.bin.bz2',
            rifRenamer: 'rifrenamer.bin.bz2',
            toDex: 'todex.bin.bz2'
        };

        function getPayload(payload, onLoadEndCallback) {
            const req = new XMLHttpRequest();
            req.open('GET', payload);
            req.responseType = "arraybuffer";
            req.onload = event => onLoadEndCallback && onLoadEndCallback(req, event);
            req.send();
        }

        function sendPayload(url, data, onLoadEndCallback) {
            const req = new XMLHttpRequest();
            req.open("POST", url, true);
            req.onload = event => onLoadEndCallback && onLoadEndCallback(req, event);
            req.send(data);
        }

        function injectPayload(file) {
            if (file.endsWith(".bz2")){
               loadPayloadBZ2(file);
            } else{
               loadPayload(file);
            }
        }

        function loadPayload(file) {
            const statusUrl = "http://127.0.0.1:9090/status";
            const payloadUrl = "http://127.0.0.1:9090";
            const req = new XMLHttpRequest();
            req.open("POST", statusUrl);
            req.onerror = () => alert("Cannot Load Payload Because The BinLoader Server Is Not Running");
            req.onload = () => {
                const responseJson = JSON.parse(req.responseText);
                if (responseJson.status === "ready") {
                    getPayload(file, req => {
                        if ((req.status === 200 || req.status === 304) && req.response) {
                            sendPayload(payloadUrl, req.response, req => {
                              progress.innerHTML = req.status === 200 ? "Payload Loaded" : 'Cannot send payload';
                            });
                        }
                    });
                } else {
                    alert("Cannot Load Payload Because The BinLoader Server Is Busy");
                }
            };
            req.send();
        }

        function loadPayloadBZ2(file) {
            const statusUrl = "http://127.0.0.1:9090/status";
            const payloadUrl = "http://127.0.0.1:9090";
            var req = new XMLHttpRequest();
            req.open("POST", statusUrl);
            req.onerror = () => alert("Cannot Load Payload Because The BinLoader Server Is Not Running");
            req.onload = () => {
               var responseJson = JSON.parse(req.responseText);
               if (responseJson.status == "ready") {
                     getPayload(file, req => {
                        if ((req.status === 200 || req.status === 304) && req.response) {
                           let payloadData = new Uint8Array(req.response);
                           try {
                              payloadData = bzip2.simple(bzip2.array(payloadData));
                           } catch (error) {
                              throw error;
                           }
                           sendPayload(payloadUrl, payloadData.buffer, req => {
                              progress.innerHTML = req.status === 200 ? "Payload Loaded" : 'Cannot send payload';
                           });
                        }
                     });
               } else {
                  alert("Cannot Load Payload Because The BinLoader Server Is Busy");
                  return;
               }
            };
            req.send();
        }
    </script>
</head>

<body>
    <div class="container">
        <h1>PPPwn-Luckfox GoldHEN Host - 11.00</h1>
        <h2 id="progress" style="color: blue;">Status</h2>
        <div id="all">
            <button class="button" onmouseover="progress.innerHTML='App2USB for PS4 11.00 fw'" onmouseout="progress.innerHTML='Status'" onclick="injectPayload(payloadFiles.app2usb)">App2USB</button>
            <button class="button" onmouseover="progress.innerHTML='App Dumper for PS4 11.00 fw'" onmouseout="progress.innerHTML='Status'" onclick="injectPayload(payloadFiles.appDumper)">App Dumper</button>
            <button class="button" onmouseover="progress.innerHTML='Backup for PS4 11.00 fw'" onmouseout="progress.innerHTML='Status'" onclick="injectPayload(payloadFiles.backup)">Backup</button>
            <button class="button" onmouseover="progress.innerHTML='Disable ASLR for PS4 11.00 fw'" onmouseout="progress.innerHTML='Status'" onclick="injectPayload(payloadFiles.disableASLR)">Disable ASLR</button>
            <br/> <br/>
            <button class="button" onmouseover="progress.innerHTML='Disable Updates for PS4 11.00 fw'" onmouseout="progress.innerHTML='Status'" onclick="injectPayload(payloadFiles.disableUpdates)">Disable Updates</button>
            <button class="button" onmouseover="progress.innerHTML='Enable Browser for PS4 11.00 fw'" onmouseout="progress.innerHTML='Status'" onclick="injectPayload(payloadFiles.enableBrowser)">Enable Browser</button>
            <button class="button" onmouseover="progress.innerHTML='Enable Updates for PS4 11.00 fw'" onmouseout="progress.innerHTML='Status'" onclick="injectPayload(payloadFiles.enableUpdates)">Enable Updates</button>
            <button class="button" onmouseover="progress.innerHTML='Exit IDU for PS4 11.00 fw'" onmouseout="progress.innerHTML='Status'" onclick="injectPayload(payloadFiles.exitIDU)">Exit IDU</button>
            <br/> <br/>
            <button class="button" onmouseover="progress.innerHTML='FTP for PS4 11.00 fw'" onmouseout="progress.innerHTML='Status'" onclick="injectPayload(payloadFiles.ftp)">FTP</button>
            <button class="button" onmouseover="progress.innerHTML='History Blocker for PS4 11.00 fw'" onmouseout="progress.innerHTML='Status'" onclick="injectPayload(payloadFiles.historyBlocker)">History Blocker</button>
            <button class="button" onmouseover="progress.innerHTML='Kernel Dumper for PS4 11.00 fw'" onmouseout="progress.innerHTML='Status'" onclick="injectPayload(payloadFiles.kernelDumper)">Kernel Dumper</button>
            <button class="button" onmouseover="progress.innerHTML='Module Dumper for PS4 11.00 fw'" onmouseout="progress.innerHTML='Status'" onclick="injectPayload(payloadFiles.moduleDumper)">Module Dumper</button>
            <br/> <br/>
            <button class="button" onmouseover="progress.innerHTML='Permanent UART for PS4 11.00 fw'" onmouseout="progress.innerHTML='Status'" onclick="injectPayload(payloadFiles.permanentUART)">Permanent UART</button>
            <button class="button" onmouseover="progress.innerHTML='PS4Debug for PS4 11.00 fw'" onmouseout="progress.innerHTML='Status'" onclick="injectPayload(payloadFiles.ps4debug)">PS4Debug</button>
            <button class="button" onmouseover="progress.innerHTML='DB-Restore for PS4 11.00 fw'" onmouseout="progress.innerHTML='Status'" onclick="injectPayload(payloadFiles.restore)">DB-Restore</button>
            <button class="button" onmouseover="progress.innerHTML='RIF Renamer for PS4 11.00 fw'" onmouseout="progress.innerHTML='Status'" onclick="injectPayload(payloadFiles.rifRenamer)">RIF Renamer</button>
            <br/> <br/>
            <button class="button" onmouseover="progress.innerHTML='ToDex for PS4 11.00 fw'" onmouseout="progress.innerHTML='Status'" onclick="injectPayload(payloadFiles.toDex)">ToDex</button>
            <br/> <br/>
            <button class="button" onclick="window.location.href = '../'" onmouseover="progress.innerHTML='Move back to PPPwn-Dashboard'" onmouseout="progress.innerHTML='Status'">Back</button>
        </div>
    </div>
</body>

</html>
